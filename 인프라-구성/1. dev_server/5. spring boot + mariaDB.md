### DB 셋팅

```sql
# DB 생성
create database db_infra;
# 유저 생성
create user sa@localhost identified by '1234';
# 모든 권환 허용
grant all privileges on db_infra.* to sa@localhost;
```

### build.gradle

```bash
	# 추가
	// mariadb
	runtimeOnly 'org.mariadb.jdbc:mariadb-java-client'
	implementation 'org.jetbrains:annotations:24.0.0'
```

### application.yaml

```bash
# spring boot + mariaDB 연동

# 이전 코드 
spring:
datasource:
  url: jdbc:sqlite:db.sqlite
  driver-class-name: org.sqlite.JDBC
  username: sa
  password: password

# 수정 코드 
spring:
  datasource:
    driver-class-name: org.mariadb.jdbc.Driver
    url: jdbc:mariadb://localhost:3306/db_infra?serverTimezone=Asia/Seoul&characterEncoding=UTF-8
    username: sa
    password: 1234
```

---

### 에러 발생

```bash
2024-04-29T22:44:39.711+09:00 ERROR 55976 --- [nio-8082-exec-7] o.h.engine.jdbc.spi.SqlExceptionHelper   : (conn=165) Field 'id' doesn't have a default value
```

경우에 따라 모델이나 ORM은 데이터베이스의 변경사항이 정확하게 반영되지 않을 수 있다.

```java
@Id // PK를 뜻함
@GeneratedValue(strategy = GenerationType.IDENTITY)
// PK의 생성 전략을 설정
/*
 * GenerationType.IDENTITY : MySQL의 AUTO_INCREMENT 방식을 이용
 * GenerationType.AUTO(default) : JPA 구현체(Hibernate)가 생성 방식을 결정
 * GenerationType.SEQUENCE : DB의 SEQUENCE를 이용해서 키를 생성. @SequenceGenerator와 같이 사용
 * GenerationType.TABLE : 키 생성 전용 테이블을 생성해서 키 생성. @TableGenerator와 함께 사용
*/
@Column(name = "id", unique = true)
private Long id;
```

### 해결

```java
// 변경 전
@GeneratedValue(strategy = GenerationType.IDENTITY
// 변경 후
@GeneratedValue(strategy = GenerationType.AUTO)
```

기본키 생성 전략을 IDENTITY에서 AUTO로 바꿔 오류를 해결했다.

mysql workbench를 사용중이라면 코드상에서 IDENTITY를 그대로 두고 workbench에서 AI를 클릭해 설정한다.